<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>属性value管理</title>
    <script type="text/javascript" src="../common/lib/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="../common/commonQuery.js"></script>
    <script type="text/javascript">

        function createTableHead() {
            var tr = "<tr>";
            tr += "<th>环境编码</th>"
            tr += "<th>应用编码</th>"
            tr += "<th>属性key</th>"
            tr += "<th>属性value</th>"
            tr += "<th>操作</th>"
            tr += "</tr>"

            return tr;
        }

        function creteTableRow(info) {
            var tr = "<tr>";
            tr += "<td>" + info.profileCode + "</td>";
            tr += "<td>" + info.appCode + "</td>";
            tr += "<td>" + info.key + "</td>";
            tr += "<td>" + info.value + "</td>";
            tr += "<td><button onclick='deleteEntity(\"" + info.profileCode + "\",\"" + info.appCode + "\",\"" + info.key + "\")'>删除</button></td>"
            tr += "</tr>"

            return tr;
        }

        function deleteEntity(profileCode, appCode, key) {
            $.ajax({
                url: "../manage/propertyValue/deletePropertyValue",
                data: {
                    profileCode: profileCode,
                    appCode: appCode,
                    key: key
                },
                success: function (ajaxResult) {
                    if (ajaxResult.success) {
                        query();
                    } else {
                        alert("删除失败，原因：" + ajaxResult.description);
                    }
                }
            });
        }
    </script>
</head>
<body>
<div>
    <form id="queryForm" action="../manage/propertyValue/queryPropertyValue">
        环境编码：<input type="text" name="profileCode">
        应用编码：<input type="text" name="appCode">
        属性key：<input type="text" name="key">
        <input type="button" onclick="pageNo = 1;query();" value="查询">
    </form>
</div>
<br/>
<div id="tableDiv"></div>
<div id="pageFoot">
    <button onclick="previousPage()">上一页</button>
    <span id="currentPageNo">1</span>
    <button onclick="nextPage()">下一页</button>
    总页数：<span id="totalPage"></span>
</div>
<div>
    <form id="setPropertyValueForm" action="../manage/propertyValue/setPropertyValue">
        环境编码：<input type="text" name="profileCode">
        应用编码：<input type="text" name="appCode">
        key：<input type="text" name="key">
        value：<input type="text" name="value">
        <input type="button" onclick="requestServer('setPropertyValueForm')" value="新增或修改属性value">
    </form>
</div>
</body>
</html>